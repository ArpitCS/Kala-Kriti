<!DOCTYPE html>
<html lang="en">
<head>
  <title>Kala-Kriti | Buy</title>
  <%- include('partials/base-head') %>
</head>
<body class="bg-gray-50">
  <!-- Set the active page for the header -->
  <% locals.page = 'buy' %>
  
  <!-- Header -->
  <%- include('partials/header') %>
  
  <!-- Buy Page Header Section -->
  <section class="bg-white py-12">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto text-center">
        <h1 class="text-4xl md:text-5xl font-semibold mb-4">Buy Art</h1>
        <p class="text-gray-600 text-lg">
          Browse our curated collection of exceptional artworks available for purchase. 
          Each piece has been carefully selected for its artistic merit and uniqueness.
        </p>
      </div>
    </div>
  </section>
  
  <!-- Search Section -->
  <section class="bg-white border-t border-b border-gray-100 py-6">
    <div class="container mx-auto px-4">
      <div class="max-w-3xl mx-auto">
        <div class="flex items-center bg-gray-50 rounded-full px-6 py-2 shadow-sm">
          <input type="text" id="search-input" placeholder="Search by artist, title, style, or medium..." class="w-full bg-transparent border-0 focus:outline-none px-2 py-2 text-gray-700">
          <button id="search-button" class="bg-black text-white rounded-full w-10 h-10 flex items-center justify-center flex-shrink-0 ml-2" onclick="searchArtworks()">
            <i class="fas fa-search"></i>
          </button>
          <button id="clear-button" class="bg-red-500 text-white rounded-full w-10 h-10 flex items-center justify-center flex-shrink-0 ml-2" onclick="clearSearch()">
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Filter Section -->
  <section class="bg-white py-6">
    <div class="container mx-auto px-4">
      <div class="flex flex-wrap justify-center gap-4">
        <button class="px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-md text-sm transition-colors duration-200">All</button>
        <button class="px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-md text-sm transition-colors duration-200">Painting</button>
        <button class="px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-md text-sm transition-colors duration-200">Sculpture</button>
        <button class="px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-md text-sm transition-colors duration-200">Photography</button>
        <button class="px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-md text-sm transition-colors duration-200">Digital Art</button>
        <button class="px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-md text-sm transition-colors duration-200">Mixed Media</button>
      </div>
    </div>
  </section>
  
  <!-- Artwork Gallery Grid -->
  <section class="py-12">
    <div class="container mx-auto px-4">
      <div id="art-gallery" class="masonry columns-1 sm:columns-2 lg:columns-3 xl:columns-4 gap-6 space-y-6">
        <!-- Gallery Items -->
        <% artworks.forEach(art => { %>
        <div class="gallery-item break-inside-avoid">
          <div class="bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300">
            <div class="relative group">
              <img src="<%= art.image %>" alt="<%= art.title %>" class="w-full">
              <div class="absolute inset-0 bg-black bg-opacity-20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end justify-end p-4">
                <div class="flex space-x-2">
                  <button class="bg-white p-2 rounded-full text-gray-800 hover:text-black transition-colors" onclick="toggleWishlist('<%= art.id %>')">
                    <i class="fa-regular fa-heart"></i>
                  </button>
                  <button class="bg-white p-2 rounded-full text-gray-800 hover:text-black transition-colors" onclick="addToCart('<%= art.id %>')">
                    <i class="fa-solid fa-cart-plus"></i>
                  </button>
                  <button class="bg-white p-2 rounded-full text-gray-800 hover:text-black transition-colors">
                    <i class="fa-solid fa-eye"></i>
                  </button>
                </div>
              </div>
            </div>
            <div class="p-4">
              <h3 class="font-medium text-gray-900"><%= art.title %></h3>
              <p class="text-sm text-gray-600 mb-1">By <%= art.author || 'Unknown Artist' %></p>
              <p class="text-xs text-gray-500 mb-1"><%= art.dimensions || 'Dimensions not available' %></p>
              <p class="text-xs text-gray-500 mb-2"><%= art.location || 'Location not available' %></p>
              <p class="font-medium">$<%= art.price %></p>
              <button onclick="addToCart('<%= art.id %>')" class="mt-2 w-full px-4 py-2 bg-black text-white text-sm font-medium rounded-md hover:bg-gray-800 transition-colors duration-200">
                Add to Cart
              </button>
            </div>
          </div>
        </div>
        <% }) %>
      </div>
    </div>
  </section>
  
  <!-- Pagination -->
  <section class="py-6 bg-white">
    <div class="container mx-auto px-4">
      <div class="flex justify-center">
        <nav class="flex items-center space-x-2">
          <a href="#" class="px-3 py-2 border border-gray-300 rounded-md text-gray-500 hover:bg-gray-50">
            <i class="fas fa-chevron-left"></i>
          </a>
          <a href="#" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-gray-50 font-medium">1</a>
          <a href="#" class="px-4 py-2 border border-gray-300 rounded-md text-gray-500 hover:bg-gray-50">2</a>
          <a href="#" class="px-4 py-2 border border-gray-300 rounded-md text-gray-500 hover:bg-gray-50">3</a>
          <span class="px-2 text-gray-500">...</span>
          <a href="#" class="px-4 py-2 border border-gray-300 rounded-md text-gray-500 hover:bg-gray-50">8</a>
          <a href="#" class="px-3 py-2 border border-gray-300 rounded-md text-gray-500 hover:bg-gray-50">
            <i class="fas fa-chevron-right"></i>
          </a>
        </nav>
      </div>
    </div>
  </section>
  
  <!-- Call to Action Section -->
  <section class="py-16 bg-gray-50">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto bg-white p-8 md:p-12 rounded-lg shadow-sm text-center">
        <h2 class="text-3xl font-semibold mb-4">Need Help Finding Art?</h2>
        <p class="text-gray-600 mb-8 max-w-2xl mx-auto">Our art specialists can help you find the perfect piece for your space. Schedule a free consultation to get personalized recommendations.</p>
        <a href="/contact" class="px-6 py-3 bg-black text-white font-medium rounded-md hover:bg-gray-800 transition-colors duration-200">
          Schedule Consultation
        </a>
      </div>
    </div>
  </section>
  
  <!-- Footer -->
  <%- include('partials/footer') %>
  
  <!-- Common Scripts -->
  <%- include('partials/base-scripts') %>
  
  <!-- Buy Page Specific Scripts -->
  <script>
    let artworks = [];
    
    function searchArtworks() {
      const query = document.getElementById('search-input').value.toLowerCase();
      if (!query.trim()) {
        alert('Please enter a search term');
        return;
      }

      const galleryItems = document.querySelectorAll('.gallery-item');
      
      galleryItems.forEach(item => {
        const title = item.querySelector('h3').textContent.toLowerCase();
        const artist = item.querySelector('p').textContent.toLowerCase();
        
        if (title.includes(query) || artist.includes(query)) {
          item.style.display = 'block';
        } else {
          item.style.display = 'none';
        }
      });
    }

    function clearSearch() {
      document.getElementById('search-input').value = '';
      const galleryItems = document.querySelectorAll('.gallery-item');
      galleryItems.forEach(item => {
        item.style.display = 'block';
      });
    }

    function addToCart(artId) {
      // Keep the same cart functionality
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      const exists = cart.find(item => item.id === artId);

      if (exists) {
        alert('This artwork is already in your cart');
      } else {
        // Find the artwork in the page
        const artworkElement = document.querySelector(`.gallery-item button[onclick*="${artId}"]`).closest('.gallery-item');
        const title = artworkElement.querySelector('h3').textContent;
        
        // Add to cart
        cart.push({ id: artId, title: title });
        localStorage.setItem('cart', JSON.stringify(cart));
        alert(`${title} has been added to your cart`);
      }
    }

    function toggleWishlist(artId) {
      // Keep the same wishlist functionality
      let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
      const index = wishlist.findIndex(item => item.id === artId);
      
      // Find the artwork in the page
      const artworkElement = document.querySelector(`.gallery-item button[onclick*="${artId}"]`).closest('.gallery-item');
      const title = artworkElement.querySelector('h3').textContent;

      if (index >= 0) {
        wishlist.splice(index, 1);
        alert(`${title} has been removed from your wishlist`);
      } else {
        wishlist.push({ id: artId, title: title });
        alert(`${title} has been added to your wishlist`);
      }

      localStorage.setItem('wishlist', JSON.stringify(wishlist));
    }
    
    document.addEventListener('DOMContentLoaded', function() {
      // Add event listeners
      document.getElementById('search-button').addEventListener('click', searchArtworks);
      
      const searchInput = document.getElementById('search-input');
      searchInput.addEventListener('keyup', function(e) {
        if (e.key === 'Enter') {
          searchArtworks();
        }
      });
      
      document.getElementById('clear-button').addEventListener('click', clearSearch);
    });
  </script>
  
  <style>
    .masonry {
      column-gap: 1.5rem;
    }
    
    .break-inside-avoid {
      break-inside: avoid;
    }
  </style>
</body>
</html>
